(()=>{"use strict";var e={5442:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.BoardSetting=void 0,(i=t.BoardSetting||(t.BoardSetting={})).PROJECT_ID="projectId",i.CB_ADDRESS="cbAddress",i.INBOX_TRACKER_ID="inboxTrackerId",i.USER_MAPPING="USER_MAPPING",i.IMPORT_CONFIGURATION="importConfiguration"},7950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1495:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9348:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.FilterCriteria=void 0,(i=t.FilterCriteria||(t.FilterCriteria={})).TEAM="Team",i.RELEASE="Release",i.SUBJECT="Subject"},9225:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(2376),t),o(i(5442),t),o(i(7950),t),o(i(1495),t),o(i(9348),t),o(i(8026),t),o(i(5543),t),o(i(7558),t),o(i(2376),t),o(i(8223),t),o(i(9225),t),o(i(8910),t)},8026:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LocalSetting=void 0,(i=t.LocalSetting||(t.LocalSetting={})).CB_USERNAME="cbUsername",i.ADVANCED_SEARCH_ENABLED="ADVANCED_SEARCH_ENABLED",i.SELECTED_TRACKER="SELECTED_TRACKER",i.CBQL_STRING="CBQL_STRING",i.SUBQUERY_LINK_METHOD="SUBQUERY_LINK_METHOD",i.FILTER_CRITERIA="FILTER_CRITERIA",i.CURRENTLY_EDITED_ITEM="CURRENTLY_EDITED_ITEM"},5543:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SessionSetting=void 0,(t.SessionSetting||(t.SessionSetting={})).CB_PASSWORD="cbPassword"},7558:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SettingKey=void 0,(i=t.SettingKey||(t.SettingKey={})).LS_KEY="codebeamer-miro-plugin",i.LS_BS_KEY="codebeamer-miro-plugin-board-settings",i.SS_KEY="codebeamer-miro-plugin"},2376:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.StandardItemProperty=void 0,(i=t.StandardItemProperty||(t.StandardItemProperty={})).ID="ID",i.TEAMS="Teams",i.OWNER="Owner",i.RELEASE="Release",i.PRIORITY="Priority",i.STORY_POINTS="Story Points",i.START_DATE="Start Date",i.END_DATE="End Date",i.ASSIGNED_TO="Assigned To",i.ASSIGNED_AT="Assigned At",i.SUBMITTED_AT="Submitted At",i.SUBMITTED_BY="Submitted By",i.MODIFIED_AT="Modified At",i.MODIFIED_BY="Modified By"},8910:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SubqueryLinkMethod=void 0,(i=t.SubqueryLinkMethod||(t.SubqueryLinkMethod={})).OR="OR",i.AND="AND"},8223:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8354:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=i(25),n=i(1681);miro.onReady((()=>r(void 0,void 0,void 0,(function*(){n.default.create(miro.getClientId(),(yield miro.board.info.get()).id)})))),setTimeout((()=>{let e=n.default.getInstance().getLocalSetting(o.LocalSetting.CURRENTLY_EDITED_ITEM);console.log("ItemId: ",e);let t=document.getElementById("itemName");t&&e&&(console.log("Inserting itemId into the header: "),t.innerText=e);let i=document.getElementById("close");i&&(i.onclick=()=>miro.board.ui.closeModal())}),500)},1681:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=i(25);class n{constructor(e,t){this._appId=(1e5+999999*Math.random()).toString(),this._boardId=(1e5+999999*Math.random()).toString(),this._appId=e,this._boardId=t}get appId(){return this._appId}get boardId(){return this._boardId}static create(e,t){return this._instance=new n(e,t),this._instance}static getInstance(){if(!this._instance){console.warn("Store not initialized. Initializing a test-store with test-ids.");const e="e2e-test",t="e2e-test";return n.create(e,t)}return this._instance}getBoardSetting(e){let t=JSON.parse(localStorage.getItem(this.getBoardSettingsLocalStorageKey())||"{}");if(!t)throw new Error("Coudnn't load board settings. Please verify their integrity in the plugin settings.");return t[e]}getLocalSettingsLocalStorageKey(){return o.SettingKey.LS_KEY+"-"+this.boardId}getSessionStorageKey(){return o.SettingKey.SS_KEY+"-"+this.boardId}getBoardSettingsLocalStorageKey(){return o.SettingKey.LS_BS_KEY+"-"+this.boardId}saveBoardSettings(e){return r(this,void 0,void 0,(function*(){const t=localStorage.getItem(this.getBoardSettingsLocalStorageKey());let i=null===t?{}:JSON.parse(t);Object.assign(i,e),localStorage.setItem(this.getBoardSettingsLocalStorageKey(),JSON.stringify(i))}))}saveLocalSettings(e){const t=localStorage.getItem(this.getLocalSettingsLocalStorageKey());let i=null===t?{}:JSON.parse(t);Object.assign(i,e),localStorage.setItem(this.getLocalSettingsLocalStorageKey(),JSON.stringify(i))}saveSessionSettings(e){const t=sessionStorage.getItem(this.getSessionStorageKey());let i=null===t?{}:JSON.parse(t);Object.assign(i,e),sessionStorage.setItem(this.getSessionStorageKey(),JSON.stringify(i))}getLocalSetting(e){let t=JSON.parse(localStorage.getItem(this.getLocalSettingsLocalStorageKey())||"{}");if(!t)throw miro.showNotification("Couldn't load local settings. Please re-enter them and then retry."),miro.board.ui.openModal("settings.html"),new Error("Coudnn't load local settings. Please verify their integrity in the plugin settings.");return t[e]}getSessionSetting(e){let t=JSON.parse(sessionStorage.getItem(this.getSessionStorageKey())||"{}");if(!t)throw miro.showNotification("Couldn't load local settings. Please re-enter them and then retry."),miro.board.ui.openModal("settings.html"),new Error("Coudnn't load session settings. Please verify their integrity in the plugin settings.");return t[e]}storeUserMapping(e){return r(this,void 0,void 0,(function*(){let t;try{t=this.getBoardSetting(o.BoardSetting.USER_MAPPING)}catch(e){t=[]}t=t.filter((t=>t.cbUserId!=e.cbUserId&&t.miroUserId!=e.miroUserId)),t.push(e),yield this.saveBoardSettings({[o.BoardSetting.USER_MAPPING]:t})}))}getUserMapping(e){let t;try{t=this.getBoardSetting(o.BoardSetting.USER_MAPPING)}catch(e){return null}return t.find((t=>!(e.cbUserId&&t.cbUserId!=e.cbUserId||e.miroUserId&&t.miroUserId!=e.miroUserId)))}}t.default=n}},t={};!function i(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}(8354)})();